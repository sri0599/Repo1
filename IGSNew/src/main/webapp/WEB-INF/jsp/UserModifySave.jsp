<%@ include file="dbConn.jsp" %><%@ page import="com.oreilly.servlet.MultipartRequest" %> <%@ page import="java.io.*" %><%	Statement stmt = null;	ResultSet rs =  null;	PreparedStatement pstmt = null;	boolean successFlag = true;	stmt = con.createStatement();	String filePath = application.getRealPath("/upload/");	con.setAutoCommit(false);	MultipartRequest mrequest =new MultipartRequest(request, filePath, 100*1024 * 1024,new com.oreilly.servlet.multipart.DefaultFileRenamePolicy());		String banner_id = mrequest.getParameter("banner_id");	String banner_title = mrequest.getParameter("banner_title");	String banner_location = mrequest.getParameter("banner_location");	String banner_category = mrequest.getParameter("banner_category");	String banner_description = mrequest.getParameter("banner_description");	String banner_image = mrequest.getFilesystemName("banner_image");	String banner_tooltip = mrequest.getParameter("banner_tooltip");	String banner_status = mrequest.getParameter("banner_status");		System.out.println("error ...  "+ banner_tooltip);		String userId = "";	if(session.getAttribute("userId")!=null)			userId = session.getAttribute("userId").toString();	StringBuffer unitedGalleryModifySaveQuery = new StringBuffer() ;	unitedGalleryModifySaveQuery.append("UPDATE united_gallery_master set ");		if(banner_title != null && !banner_title.equals("") && !banner_title.equals("null"))	unitedGalleryModifySaveQuery.append("banner_title=?, ");		if(banner_location != null && !banner_location.equals("") && !banner_location.equals("null"))	unitedGalleryModifySaveQuery.append("banner_location=?, ");		if(banner_category != null && !banner_category.equals("") && !banner_category.equals("null"))	unitedGalleryModifySaveQuery.append("banner_category=?, ");		if(banner_description != null && !banner_description.equals("") && !banner_description.equals("null"))	unitedGalleryModifySaveQuery.append("banner_description=?, ");		if(banner_image != null && !banner_image.equals("") && !banner_image.equals("null"))	unitedGalleryModifySaveQuery.append("banner_image=?, ");		if(banner_tooltip != null && !banner_tooltip.equals("") && !banner_tooltip.equals("null"))		unitedGalleryModifySaveQuery.append("banner_tooltip=?, ");			if(banner_status != null && !banner_status.equals("") && !banner_status.equals("null"))		unitedGalleryModifySaveQuery.append("banner_status=?, ");		unitedGalleryModifySaveQuery.append("LAST_UPDATED_BY='"+userId+"', ");	unitedGalleryModifySaveQuery.append("LAST_UPDATION_DATE= curdate()");			unitedGalleryModifySaveQuery.append("where banner_id=?");		System.out.println("unitedGalleryModifySaveQuery"+unitedGalleryModifySaveQuery);	try	{	pstmt = con.prepareStatement(unitedGalleryModifySaveQuery.toString());	System.out.println("image_left1 out");	int i = 0;	if(banner_title != null && !banner_title.equals("") && !banner_title.equals("null"))	{			i++;		pstmt.setString(i, banner_title);			System.out.println("banner_title:"+i+banner_title);	}		if(banner_location != null && !banner_location.equals("") && !banner_location.equals("null"))	{		i++;		pstmt.setString(i, banner_location);	}		if(banner_category != null && !banner_category.equals("") && !banner_category.equals("null"))	{		i++;	  	pstmt.setString(i, banner_category);	}	if(banner_description != null && !banner_description.equals("") && !banner_description.equals("null"))	{		i++;		pstmt.setString(i, banner_description);	}	if(banner_image != null && !banner_image.equals("") && !banner_image.equals("null"))	{		i++;		pstmt.setString(i, banner_image);	}	if(banner_tooltip != null && !banner_tooltip.equals("") && !banner_tooltip.equals("null"))	{		i++;		pstmt.setString(i, banner_tooltip);	}	if(banner_status != null && !banner_status.equals("") && !banner_status.equals("null"))	{		i++;		pstmt.setString(i, banner_status);	}			i++;	pstmt.setString(i, banner_id);			pstmt.executeUpdate();	con.commit();	con.setAutoCommit(true);	successFlag = true;	}	catch(Exception e)	{		System.out.println(e);		successFlag=false;	}	finally	{		if(pstmt!=null)			pstmt.close();		if(stmt!=null)			pstmt.close();		if(con!=null)			con.close();	}		if(successFlag)	{		%>		<script>		alert("Data saved successfully.");		window.parent.location.href="UnitedGallery.jsp";		</script>		<%	}	else	{		%>		<script>		alert("Data saved failed.");		</script>		<%	}%>                 